<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Draggable Progress Bar - Tailwind</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 flex items-center justify-center min-h-screen p-6">
    <div class="w-full max-w-md">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">可拖动进度条</h2>

      <!-- 进度条容器 -->
      <div
        id="progressContainer"
        class="relative h-2 w-full bg-gray-300 rounded-full cursor-pointer"
      >
        <!-- 已完成部分 -->
        <div
          id="progressFill"
          class="absolute top-0 left-0 h-full bg-blue-500 rounded-full w-[40%]"
        ></div>
        <!-- 拖动滑块 -->
        <div
          id="progressThumb"
          class="absolute top-1/2 w-5 h-5 bg-white border-2 border-blue-500 rounded-full shadow-md -translate-y-1/2 -translate-x-1/2 cursor-grab active:cursor-grabbing"
          style="left: 40%"
        ></div>
      </div>

      <!-- 百分比显示 -->
      <p id="percentDisplay" class="mt-2 text-center text-gray-700 font-medium">
        0%
      </p>
    </div>

    <script>
      const container = document.getElementById("progressContainer");
      const fill = document.getElementById("progressFill");
      const thumb = document.getElementById("progressThumb");
      const display = document.getElementById("percentDisplay");

      let isDragging = false;
      let progress = 0; // 0 ~ 100

      // 更新 UI
      function updateProgress(percent) {
        progress = Math.min(100, Math.max(0, percent));
        const pos = `${progress}%`;
        fill.style.width = pos;
        thumb.style.left = pos;
        display.textContent = Math.round(progress) + "%";
      }

      // 获取点击/拖拽位置对应的百分比
      function getPercentFromEvent(e) {
        const rect = container.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        return (clickX / rect.width) * 100;
      }

      // 鼠标点击容器：跳转到该位置
      container.addEventListener("click", (e) => {
        if (e.target === thumb) return; // 避免重复触发
        updateProgress(getPercentFromEvent(e));
      });

      // 拖拽逻辑
      thumb.addEventListener("mousedown", () => {
        isDragging = true;
        thumb.classList.add("cursor-grabbing");
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        updateProgress(getPercentFromEvent(e));
      });

      document.addEventListener("mouseup", () => {
        if (isDragging) {
          isDragging = false;
          thumb.classList.remove("cursor-grabbing");
        }
      });

      // 可选：阻止文本选中（提升体验）
      thumb.addEventListener("dragstart", (e) => e.preventDefault());
    </script>
  </body>
</html>
